services:
  roundipy:
    build: .
    image: roundipy-img
    container_name: roundipy
    restart: unless-stopped

    environment:
      # Number of concurrent FFmpeg processes
      ROUNDIPY_JOBS: 2
      # Lifetime of the finished file in seconds
      TTL_SECONDS: 60
      # Maximum clip duration (Telegram's limit)
      MAX_CLIP_SECONDS: 60

    volumes:
      - ./static:/app/static

    ports:
      - "127.0.0.1:8000:8000"

    networks:
      roundipy_net:
        ipv4_address: 10.77.0.10

networks:
  roundipy_net:
    driver: bridge
    ipam:
      config:
        - subnet: 10.77.0.0/24